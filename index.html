document.addEventListener('DOMContentLoaded', function() {
    const quickLinksContainer = document.querySelector('.quickLinksContainer');

    // Load quick links from localStorage on page load
    function loadQuickLinks() {
        try {
            const savedLinks = JSON.parse(localStorage.getItem('quickLinks')) || [];
            quickLinksContainer.innerHTML = ''; // Clear current links before loading new ones
            savedLinks.forEach(link => {
                const linkElement = document.createElement('a');
                linkElement.href = link.url;
                linkElement.textContent = link.name;
                linkElement.classList.add('quick-link');
                quickLinksContainer.appendChild(linkElement);
                quickLinksContainer.appendChild(document.createElement('br')); // Add a line break after each link
            });
        } catch (e) {
            console.error('Error accessing localStorage', e);
        }
    }

    // Function to handle adding a new quick link
    document.querySelector('.buttonStyle').addEventListener('click', function() {
        const linkUrl = prompt("Enter the URL for your quick link (without 'https://' if you want to skip it):");
        const linkText = prompt("Enter the name of your quick link:");

        if (linkUrl && linkText) {
            // Check if the link includes 'http://' or 'https://', and if not, prepend 'https://'
            if (!linkUrl.match(/^https?:\/\//)) {
                linkUrl = 'https://' + linkUrl;
            }

            try {
                // Save the new link to localStorage
                const savedLinks = JSON.parse(localStorage.getItem('quickLinks')) || [];
                savedLinks.push({ url: linkUrl, name: linkText });
                localStorage.setItem('quickLinks', JSON.stringify(savedLinks));

                // Create a new anchor element for the quick link
                const linkElement = document.createElement('a');
                linkElement.href = linkUrl;
                linkElement.textContent = linkText;
                linkElement.classList.add('quick-link');
                
                quickLinksContainer.appendChild(linkElement);
                quickLinksContainer.appendChild(document.createElement('br')); // Add a line break after the new link
            } catch (e) {
                console.error('Error saving quick link', e);
            }
        }
    });

    // Handle the search button functionality
    document.querySelector('#searchButton').addEventListener('click', function() {
        const query = document.querySelector('#search').value;
        if (query) {
            window.location.href = `https://www.google.com/search?q=${query}`;
        }
    });

    // Remove all quick links
    document.querySelector('#removeAllButton').addEventListener('click', function() {
        if (confirm("Are you sure you want to remove all quick links?")) {
            try {
                localStorage.removeItem('quickLinks'); // Clear links from localStorage
                quickLinksContainer.innerHTML = ''; // Clear links from the page
            } catch (e) {
                console.error('Error removing quick links', e);
            }
        }
    });

    // Load the quick links when the page is loaded
    loadQuickLinks();

    // Update time every second
    function updateTime() {
        const timeElement = document.getElementById('time');
        const dateElement = document.getElementById('date');
        const now = new Date();

        const hours = now.getHours().toString().padStart(2, '0');
        const minutes = now.getMinutes().toString().padStart(2, '0');
        const seconds = now.getSeconds().toString().padStart(2, '0');
        const timeString = `${hours}:${minutes}:${seconds}`;

        const dateString = now.toLocaleDateString('en-US', {
            weekday: 'long',
            month: 'long',
            day: 'numeric',
            year: 'numeric'
        });

        timeElement.textContent = timeString;
        dateElement.textContent = dateString;
    }

    setInterval(updateTime, 1000);
    updateTime(); // Initial call
});
